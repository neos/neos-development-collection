`7.0.0 (2020-12-07) <https://github.com/neos/neos-development-collection/releases/tag/7.0.0>`_
==============================================================================================

Overview of merged pull requests
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

`TASK: Removes unused semantic-release <https://github.com/neos/neos-development-collection/pull/3208>`_
--------------------------------------------------------------------------------------------------------

Semantic-release has been added 2 years ago with the image variant change. But it was never used and as we need a changelog ruleset for Neos commit messages before we are able to use it we can just drop it.

When we plan to use it we can add it again anyways.

- [x] Code follows the PSR-2 coding style
- [x] Tests have been created, run and adjusted as needed
- [ ] The PR is created against the `lowest maintained branch <https://www.neos.io/features/release-roadmap.html>`_

* Resolves: `#3209 <https://github.com/neos/neos-development-collection/issues/3209>`_
* Packages: ``Browser``

`FEATURE: Remove default prototype generator <https://github.com/neos/neos-development-collection/pull/3210>`_
--------------------------------------------------------------------------------------------------------------

Related to #3137

* Packages: ``Neos``

`TASK: Add new login wallpaper <https://github.com/neos/neos-development-collection/pull/3214>`_
------------------------------------------------------------------------------------------------

* Packages: ``Neos``

`!!! FEATURE: Add getIconUri & getDescription to AssetSourceInterface <https://github.com/neos/neos-development-collection/pull/3211>`_
---------------------------------------------------------------------------------------------------------------------------------------

Extends the `Neos\\Media\\Domain\\Model\\AssetSource\\ AssetSourceInterface` by the two methods `getIconUri()` and `getDescription()`.

This is a breaking change if you created a custom Asset source (implementing the `AssetSourceInterface`) and didn't implement these methods yet.

Related to #3137

* Packages: ``Media`` ``Neos``

`!!! BUGFIX: Revert adjustment of ContentCollection Constraint adjustment <https://github.com/neos/neos-development-collection/pull/3213>`_
-------------------------------------------------------------------------------------------------------------------------------------------

In https://github.com/neos/neos-development-collection/pull/2715 the Constraints of the ContentCollection were changed to allow Content instead of denying Documents.

This caused trouble because the order the constraints of abstract nodes are applied is not defined
and thus derived collections that forbade Neos.Neos:Content but allowed a custom NodeType
ran into trouble.

Reverts the following commits:
- `0b88d4b8d9ceb5ed1e97dcd1056c8c3443cc98db <https://github.com/neos/neos-development-collection/commit/0b88d4b8d9ceb5ed1e97dcd1056c8c3443cc98db>`_ of pr #2715
- `24a785d650308fac43a46cca90916aac31e8eb0e <https://github.com/neos/neos-development-collection/commit/24a785d650308fac43a46cca90916aac31e8eb0e>`_ of pr #3163
- `61123e509e0d5994772c978e8c0e4566e7d4bd2c <https://github.com/neos/neos-development-collection/commit/61123e509e0d5994772c978e8c0e4566e7d4bd2c>`_ of pr #3178

* Resolves: `#3212 <https://github.com/neos/neos-development-collection/issues/3212>`_
* Packages: ``Afx`` ``Neos``

`TASK: Adjust deprecated notices for next release <https://github.com/neos/neos-development-collection/pull/3207>`_
-------------------------------------------------------------------------------------------------------------------

Related to #3137

* Packages: ``Neos``

`TASK: Include AFX in development collection <https://github.com/neos/neos-development-collection/pull/3205>`_
--------------------------------------------------------------------------------------------------------------

This merges the AFX repository as subtree of the development collection, additionally the splitter configuration will have to be adapted afterwards and the Neos.Fusion.AFX repository made read-only.

* Packages: ``Afx``

`TASK: Rename TYPO3CR where possible <https://github.com/neos/neos-development-collection/pull/3188>`_
------------------------------------------------------------------------------------------------------

Affects #2842 and #3137

* Packages: ``ContentRepository`` ``Fusion`` ``Neos`` ``NodeTypes``

`FEATURE: Replace Fusion:Collection with Fusion:Loop <https://github.com/neos/neos-development-collection/pull/3202>`_
----------------------------------------------------------------------------------------------------------------------

* Related: `#3137 <https://github.com/neos/neos-development-collection/issues/3137>`_
* Packages: ``ColumnLayouts`` ``ContentReferences`` ``Neos``

`FEATURE: Replace Neos.Fusion:Array with Neos.Fusion:Join <https://github.com/neos/neos-development-collection/pull/3198>`_
---------------------------------------------------------------------------------------------------------------------------

* Related: `#3137 <https://github.com/neos/neos-development-collection/issues/3137>`_
* Packages: ``Fusion``

`FEATURE: Replace test function names to map prototype name in Map test <https://github.com/neos/neos-development-collection/pull/3203>`_
-----------------------------------------------------------------------------------------------------------------------------------------

* Related: `#3137 <https://github.com/neos/neos-development-collection/issues/3137>`_
* Packages: ``Fusion``

`FEATURE: Replace RawArray with DataStructure <https://github.com/neos/neos-development-collection/pull/3200>`_
---------------------------------------------------------------------------------------------------------------

#3137

* Packages: ``Fusion`` ``Neos``

`FEATURE: Replace TS in comments with Fusion <https://github.com/neos/neos-development-collection/pull/3201>`_
--------------------------------------------------------------------------------------------------------------

#3137

* Packages: ``Fusion`` ``Neos``

`Fix doc comments in Node and NodeInterface <https://github.com/neos/neos-development-collection/pull/3195>`_
-------------------------------------------------------------------------------------------------------------

Tweaks some doc comments that were introduced with #3187 and referred to a non-existing class `TraversableNode`

* Packages: ``ContentRepository``

`TASK: Adjust Node and NodeInterface deprecation annotations <https://github.com/neos/neos-development-collection/pull/3187>`_
------------------------------------------------------------------------------------------------------------------------------

* Reword the deprecation message in the interface doc comment
* For deprecated methods with a replacement (e.g. `getDepth()`):
  * Don't remove the method but keep the deprecation annotation
  * Remove any `@api` annotation from the method
* For deprecated methods without replacement (e.g. `getContextPath()`):
  * Don't remove the method
  * replace the `@deprecated` annotation by some comment

* Related: `#3137 <https://github.com/neos/neos-development-collection/issues/3137>`_
* Packages: ``Browser`` ``ContentRepository``

`TASK: Unify indents to spaces in fusion files <https://github.com/neos/neos-development-collection/pull/3186>`_
----------------------------------------------------------------------------------------------------------------

Currently, we have a kind of a mess in the different fusion files. Sometimes we use spaces, sometimes tabs. This PR clean this up.

* Packages: ``Fusion``

`BUGFIX: Adjust NodeIdentityConverterAspect to typed persistence <https://github.com/neos/neos-development-collection/pull/3183>`_
----------------------------------------------------------------------------------------------------------------------------------

* Fixes: `#3181 <https://github.com/neos/neos-development-collection/issues/3181>`_

`TASK: Adjust to removal of ComponentContext <https://github.com/neos/neos-development-collection/pull/3175>`_
--------------------------------------------------------------------------------------------------------------

This removes all usages of `ComponentContext`.

Related: neos/flow-development-collection#2019

`TASK: Update gedmo/doctrine-extensions to 3.0 <https://github.com/neos/neos-development-collection/pull/3179>`_
----------------------------------------------------------------------------------------------------------------

depends on #3177
Related to neos/flow-development-collection#2122
Required for neos/flow-development-collection#2247 et.al.

`TASK: Remove use of resolveShortcuts argument <https://github.com/neos/neos-development-collection/pull/3182>`_
----------------------------------------------------------------------------------------------------------------

The LinkingService.createNodeUri() no longer uses/accepts this
parameter…

See https://github.com/neos/neos-development-collection/pull/3168

* Packages: ``Neos``

`!!! TASK: Adjust to doctrine/migrations v3 <https://github.com/neos/neos-development-collection/pull/3177>`_
-------------------------------------------------------------------------------------------------------------

* Packages: ``Media`` ``Neos``

`BUGFIX: Adjust to typed persistence code <https://github.com/neos/neos-development-collection/pull/3180>`_
-----------------------------------------------------------------------------------------------------------

See https://github.com/neos/flow-development-collection/issues/2231

* Packages: ``ContentRepository`` ``Media`` ``Neos``

`TASK: Apply migrations <https://github.com/neos/neos-development-collection/pull/3176>`_
-----------------------------------------------------------------------------------------

Apply core migrations to (some) Neos dev collection packages.

* Packages: ``ContentRepository``

`BUGFIX: Correct bug in migration of ContentCollectionConstraints <https://github.com/neos/neos-development-collection/pull/3178>`_
-----------------------------------------------------------------------------------------------------------------------------------

The adjustments were applied to all nodes with constraints because the existence of the superType "Neos.Neos:ContentCollection" was not properly checked.

The fixed migration was introduced in #3163

* Packages: ``Browser`` ``Neos``

`!!! TASK: Raise minimum PHP version to 7.3 <https://github.com/neos/neos-development-collection/pull/3172>`_
-------------------------------------------------------------------------------------------------------------

See https://github.com/neos/flow-development-collection/issues/2236

* Packages: ``Neos``

`TASK: Remove PHP 7.2 builds <https://github.com/neos/neos-development-collection/pull/3171>`_
----------------------------------------------------------------------------------------------

See https://github.com/neos/flow-development-collection/issues/2236

* Packages: ``Neos``

`!!! FEATURE: Add Afx template for SiteKickstarter <https://github.com/neos/neos-development-collection/pull/3089>`_
--------------------------------------------------------------------------------------------------------------------

!!! FEATURE: Add Afx template for SiteKickstarter

This is the first approach for making the SiteKickstarter more versatile. Now you can easily add a custom generator package and kickstart some sorts of sites with one package.

* Add possibility to use more than one template for the site kickstarter
* Add Afx template in addition to the fluid template
* Add the generator selection to the backend module for site packages
* Removed the old generic generator service (this is breaking)

This is a breaking change because it removes the old, Fluid-based generator service.
In case you want to use the Fluid based rendering you can use the dedicated package at https://github.com/queoGmbH/FluidSiteGenerator

* Resolves: `#3074 <https://github.com/neos/neos-development-collection/issues/3074>`_

`!!! FEATURE: Faster frontend routing <https://github.com/neos/neos-development-collection/pull/3168>`_
-------------------------------------------------------------------------------------------------------

Moves most of the "expensive" logic from the `LinkingService` to the
`FrontendNodeRoutePartHandler` where it will be cached.

This leads to a great performance improvement because:
* The "current Site" is only determined once, not for every URI
* Previously we had *three* routes for the frontend, now it's
  a single one
* Shortcut resolution will happen in the handler, so it will
  be cached

Most of these performance improvements even hold true for uncached requests.

### Breaking Change

This might be a breaking change if you...:
* ...extend the `FrontendNodeRoutePartHandler` and rely on it's inner workings (for example
  with shortcut nodes¹).
  No methods were removed though, so chances are that you are not affected
* ...created (functional) tests that cover the Neos routing behavior.
  The `FrontendNodeRoutePartHandler` expects the `requestUriHost` routing
  parameter to be set (usually done via HTTP Middleware). You can simulate that behavior via:
  `$httpRequest = $httpRequest->withAttribute(ServerRequestAttributes::ROUTING_PARAMETERS, RouteParameters::createEmpty()->withParameter('requestUriHost', 'some-host'));`
* ...rely on the *internal* behavior of the `resolveShortcuts` argument of the `LinkingService`
  This is quite unlikely since we don't use that route part handler for the
  backend, where shortcut nodes are never resolved anyways.

---
¹ The Node instance passed to `resolveValue()` will no longer be the *target node* of a shortcut
  but the actual shortcut node itself. It is resolved to the target node/URI via `resolveShortcutNode()`.
  This method is `protected` so that it can be called from any subclass if needed.

* Related: `#3020 <https://github.com/neos/neos-development-collection/issues/3020>`_
* Packages: ``Neos``

`!!! FEATURE: Respect language plurals also in XliffService <https://github.com/neos/neos-development-collection/pull/3166>`_
-----------------------------------------------------------------------------------------------------------------------------

The neos-ui can not use language plurals as the UI only uses the xliff.json endpoint and the XliffService that creates the JSON returns only the singular. This change adds the plurals when they are available.

**What I did**

The XliffService always returned the first value of a translation unit. So even when a label has a plural the XliffService only used the singular. So I changed that and we are respecting now plural and singular.

**How I did it**

Added a new method getTranslationUnitValue that iterates over the translation unit values and potentially scramble the singular and plural. When we have just a singular we just use the single value for the label. If we have singular and plural we use the whole array for the label key.

**How to verify it**
Clear the Xliff cache and http://domain.foo/neos/xliff.json?locale=en and check changesApplied from the neos ui for instance.

!`Screenshot 2020-11-09 at 13 25 12 <https://user-images.githubusercontent.com/1014126/98541066-2452b580-228f-11eb-95d9-9d283b35e174.png>`_


* Resolves: `#2786 <https://github.com/neos/neos-development-collection/issues/2786>`_
* Packages: ``Neos``

`TASK: Add migration to adjust constraints of \`Neos.Neos:ContentCollections\` <https://github.com/neos/neos-development-collection/pull/3163>`_
------------------------------------------------------------------------------------------------------------------------------------------------

In PR #2715 the constraints in the `Neos.Neos:ContentCollection` were altered from allow `*` and disallow `Neos.Neos:Document` to disallow `*` and allowing `Neos.Neos:Content`.

This change adds an automatic migration to alter NodeTypes that are derived from `Neos.Neos:ContentCollection` and constraints of childNodes that are of type `Neos.Neos:ContentCollection`.

The migration will replace constraints for `*` with constraints for `Neos.Neos:Content` while preserving order.

Limitations: This will not run on nodeTypes that indirectly inherit from `Neos.Neos:ContentCollection` and `childNodes`
that are of a derived ContentCollection nodeType. However i consider such cases exotic and hope this catches 99% of the cases.

* Resolves: `#3164 <https://github.com/neos/neos-development-collection/issues/3164>`_
* Packages: ``Neos``

`TASK: Apply core migrations for Neos.ContentRepository <https://github.com/neos/neos-development-collection/pull/3167>`_
-------------------------------------------------------------------------------------------------------------------------

The core migrations are not stored in the database anymore and therefore our travis tests are failing.

**What I did**
Applied core migrations for Neos.ContentRepository

* Packages: ``ContentRepository``

`FEATURE: Lazy loading images <https://github.com/neos/neos-development-collection/pull/3149>`_
-----------------------------------------------------------------------------------------------

This will solve issue #3084

* Packages: ``NodeTypes``

`FEATURE: Add StaticResource helper to Fusion defaults <https://github.com/neos/neos-development-collection/pull/3134>`_
------------------------------------------------------------------------------------------------------------------------

Add the StaticResource EEL Helper from https://github.com/neos/flow-development-collection/pull/2174 to the Fusion defaultContext.

StaticResource.uri (packageKey, pathAndFilename, localize)
- (string) packageKey
- (string) pathAndFilename
- (boolean, optional) localize = false

StaticResource.content (packageKey, pathAndFilename, localize)
- (string) packageKey
- (string) pathAndFilename
- (boolean, optional) localize = false

This makes this helper available in afx:

```
  <link rel="stylesheet" href={StaticResource.uri('Neos.Demo', 'Public/Styles/Main.css')} media="all" />

  <style>{StaticResource.content('Neos.Demo', 'Public/Styles/Main.css')}</style>
```

* Resolves: `#3133 <https://github.com/neos/neos-development-collection/issues/3133>`_
* Packages: ``Fusion``

`FEATURE: Introduce NodeTypePresetPostprocessor <https://github.com/neos/neos-development-collection/pull/3087>`_
-----------------------------------------------------------------------------------------------------------------

Introduce `NodeTypePresetPostprocessor` and extract `IconNameMappingPostprocessor` and `DefaultPropertyEditorPostprocessor` from `NodeTypeConfigurationEnrichmentAspect`.

This allows to configure nodeType presets via settings and apply them to nodeTypes via. Other than mixins this allows to ensure consistent configurations across differently named properties to ensure a consistent editor experience.

Note: This is mainly a core adaptation of the Sitegeist.Silhoettes package https://github.com/sitegeist/Sitegeist.Silhouettes.

The presets can be applied by definining the `options.preset` for childNodes or properties.

```
Neos:
  Neos:
    nodeTypes:

      presets:

        childNodes:
          vendor:
            defaultConstraints:
              constraints:
                'Neos.Neos:Content': true
                'Neos.NodeTypes.BaseMixins:TitleMixin': true

        properties:
          vendor:
            textBlock:
              type: string
              ui:
                inlineEditable
            type: string
            defaultValue: ''
            ui:
              inlineEditable: true
              inline:
                editorOptions:
                  placeholder: 'Vendor.Site:NodeTypes.Generic:text.placeholder'
                  autoparagraph: true
                  formatting:
                    strong: true
                    em: true
                    u: false
                    underline: false
```

Presets can then be applied to nodetypes via:

```
'Vendor.Package:NodeTypeName':
  childNodes:
    column1:
      options:
        preset: 'vendor.defaultConstraints'
    column2:
      options:
        preset: 'vendor.defaultConstraints'
  properties:
    description:
      options:
        preset: 'vendor.textBlock'
```

* Resolves: `#3090 <https://github.com/neos/neos-development-collection/issues/3090>`_

This also solves two thirds of #2867  (get rid of NodeTypeConfigurationEnrichmentAspect). The last part cannot be extracted that easily as it converts the magic value `i18n` to a key built from the NodeType it was defined on.

* Packages: ``Neos``

`!!!TASK: Adjust constraints of \`Neos.Neos:ContentCollection\` to allow \`Content\` instead of denying \`Document\` <https://github.com/neos/neos-development-collection/pull/2715>`_
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

A ContentCollection did allow all children but Documents in the past which is unexpected and makes it needlessly harder to create derived nodetypes with custom constraints.

This constraint is now adjusted to allow nodes of `Neos.Neos:Content` inside a `Neos.Neos:ContentCollection` as anyone would expect given the nodetype name.

Additionally the test fixtures are adjusted as in one test a `ContentCollection` was moved into another. Now the respective node has a type that inherits from Content and ContentCollection.

**How to update:**  If you created NodeTypes derived from `Neos.Neos:ContentCollection` and altered the constraints to forbid `*`  you have to adjust the constraints and now forbid `Neos.Neos:Content` instead of `*`:

```
'Vendor.Site:ContentCollection':
  superTypes:
    'Neos.Neos:ContentCollection': true
  constraints:
    nodeTypes:
      // remove constraints like:
      // '*': false
      // and add the following instead
      'Neos.Neos:Content': false
      // everything else stays the same
      'Vendor.Site:Content': true
```

* Resolves: `#3119 <https://github.com/neos/neos-development-collection/issues/3119>`_
* Packages: ``Neos``

`TASK: Remove unused legacy UI setting <https://github.com/neos/neos-development-collection/pull/3130>`_
--------------------------------------------------------------------------------------------------------

Part of #3137

* Packages: ``Neos``

`FEATURE: Allow users to log in without access to the content module <https://github.com/neos/neos-development-collection/pull/3123>`_
--------------------------------------------------------------------------------------------------------------------------------------

Before, it was not possible to log in to the Neos backend without having access to the content module, as the user was automatically redirected to the content module.

With this feature, an available module is determined when a user logs in and the user is redirected to that module.

# High level features

- Users no longer need to have access to the content module to be able to log in
- There is a setting `Neos.Neos.moduleConfiguration.preferredStartModules` available to define the preferred start modules. The first module of that list, which a user has access to is chosen for the start module. If none of the listed modules can be accessed, the first module of the list of accessible modules of a user is chosen:
- The backend modules and sub modules can now be sorted using the positional array sorter

```
Neos:
  Neos:
    moduleConfiguration:
      preferredStartModules: [ 'content', 'user/usersettings' ]
```

## Details

- A user who has no access to the content module is redirected to the first (preferred) accessible content module
- A user who has access to the content module is still redirected to the content module by default
- A user without access to the content module does not see the available sites menu
- When the `preferredStartModule` is not `content`, the content module is still selectable

# Update notes

- This removes `Neos.Neos.userInterface.routeAfterLogin`, it can be dropped from custom configuration

* Resolves: `#2351 <https://github.com/neos/neos-development-collection/issues/2351>`_
Depends on: https://github.com/neos/neos-ui/pull/2793

* Packages: ``Neos``

`TASK: Remove unused backend content container <https://github.com/neos/neos-development-collection/pull/3127>`_
----------------------------------------------------------------------------------------------------------------

The view helper and the "corresponding" template seems
not to be used anywhere in the core anymore

* Packages: ``BaseMixins`` ``Neos``

`BUGFIX: Require jQuery Version 3.5.1 <https://github.com/neos/neos-development-collection/pull/3126>`_
-------------------------------------------------------------------------------------------------------

After the https://github.com/neos/neos-development-collection/pull/3023 the image selector in the backend was broken.

* Packages: ``Browser``

`TASK: Code cleanup in backend login area <https://github.com/neos/neos-development-collection/pull/3122>`_
-----------------------------------------------------------------------------------------------------------

Code cleanup and method typing in preparation of #2351
No functional changes.

* Packages: ``Neos``

`!!! TASK: Remove the backend menu API controller <https://github.com/neos/neos-development-collection/pull/3125>`_
-------------------------------------------------------------------------------------------------------------------

Seems as this is a leftover of the old UI and is not used anywhere
in the current code.

* Packages: ``Browser`` ``Neos``

`FEATURE: third parameter "sortFlags" for FlowQuery sort() <https://github.com/neos/neos-development-collection/pull/2989>`_
----------------------------------------------------------------------------------------------------------------------------

On enabling Psmb/FlatNav I stumbled over the FlowQuery sort operation having the demand for case insensitive sort.

Here's the solution: a third optional `sort()` parameter for sortOptions.

The FlowQuery `sort()` is executed utilizing PHP `arsort()`. According to the sort flags of `arsort()` (see `https://www.php.net/manual/en/function.sort <https://www.php.net/manual/en/function.sort>`_) the sort options are:

```
'SORT_REGULAR'
'SORT_NUMERIC'
'SORT_STRING'
'SORT_LOCALE_STRING'
'SORT_NATURAL'
'SORT_FLAG_CASE' (use as last option with SORT_STRING, SORT_LOCALE_STRING or SORT_NATURAL)
```
A single sort option can be supplied as string. Multiple sort options are supplied as array.

Other than the above listed sort options shall throw an error.

Omitting the third parameter leaves FlowQuery `sort()` in `SORT_REGULAR` sort mode.

How to use (example for Psmb/FlatNav) in `Settings.yaml`:
```
      frontendConfiguration:
        Psmb_FlatNav:
          presets:
            tree:
              type: tree
              label: tree
              icon: tree
            pressTags:
              label: 'Press Tags'
              icon: icon-hashtag
              type: flat
              query: 'q(node).find("[instanceof My.Site:Document.PressTag]").sort("title", "ASC", ["SORT_NATURAL", "SORT_FLAG_CASE"]).get()'
              ...
            numberTags:
              label: 'Number Tags'
              icon: arrow-circle-up
              type: flat
              query: 'q(node).find("[instanceof My.Site:Document.NumberTag]").sort("title", "ASC", "SORT_NUMERIC").get()'
              ...
```
In the line `query:` of `pressTags:` you can see FlowQuery `sort()`in action:
```
    sort("title", "ASC", ["SORT_NATURAL", "SORT_FLAG_CASE"])
```
with sort flags `["SORT_NATURAL", "SORT_FLAG_CASE"]` passed as array for natural, case insensitive sort.

The line `query:`of `numberTags:` has a single sort option `"SORT_NUMERIC"` passed as string:
```
    sort("title", "ASC", "SORT_NUMERIC")
```

* Packages: ``Neos``

`TASK: Bump elliptic from 6.5.0 to 6.5.3 in /Neos.Neos <https://github.com/neos/neos-development-collection/pull/3024>`_
------------------------------------------------------------------------------------------------------------------------

Bumps `elliptic <https://github.com/indutny/elliptic>`_ from 6.5.0 to 6.5.3.
<details>
<summary>Commits</summary>
<ul>
<li><a href="https://github.com/indutny/elliptic/commit/`8647803dc3d90506aa03021737f7b061ba959ae1 <https://github.com/neos/neos-development-collection/commit/8647803dc3d90506aa03021737f7b061ba959ae1>`_"><code>8647803</code></a> 6.5.3</li>
<li><a href="https://github.com/indutny/elliptic/commit/`856fe4d99fe7b6200556e6400b3bf585b1721bec <https://github.com/neos/neos-development-collection/commit/856fe4d99fe7b6200556e6400b3bf585b1721bec>`_"><code>856fe4d</code></a> signature: prevent malleability and overflows</li>
<li><a href="https://github.com/indutny/elliptic/commit/`60489415e545efdfd3010ae74b9726facbf08ca8 <https://github.com/neos/neos-development-collection/commit/60489415e545efdfd3010ae74b9726facbf08ca8>`_"><code>6048941</code></a> 6.5.2</li>
<li><a href="https://github.com/indutny/elliptic/commit/`9984964457c9f8a63b91b01ea103260417eca237 <https://github.com/neos/neos-development-collection/commit/9984964457c9f8a63b91b01ea103260417eca237>`_"><code>9984964</code></a> package: bump dependencies</li>
<li><a href="https://github.com/indutny/elliptic/commit/`ec735edde187a43693197f6fa3667ceade751a3a <https://github.com/neos/neos-development-collection/commit/ec735edde187a43693197f6fa3667ceade751a3a>`_"><code>ec735ed</code></a> utils: leak less information in <code>getNAF()</code></li>
<li><a href="https://github.com/indutny/elliptic/commit/`71e4e8e2f5b8f0bdbfbe106c72cc9fbc746d3d60 <https://github.com/neos/neos-development-collection/commit/71e4e8e2f5b8f0bdbfbe106c72cc9fbc746d3d60>`_"><code>71e4e8e</code></a> 6.5.1</li>
<li><a href="https://github.com/indutny/elliptic/commit/`7ec66ffa255079260126d87b1762a59ea10de5ea <https://github.com/neos/neos-development-collection/commit/7ec66ffa255079260126d87b1762a59ea10de5ea>`_"><code>7ec66ff</code></a> short: add infinity check before multiplying</li>
<li><a href="https://github.com/indutny/elliptic/commit/`ee7970b92f388e981d694be0436c4c8036b5d36c <https://github.com/neos/neos-development-collection/commit/ee7970b92f388e981d694be0436c4c8036b5d36c>`_"><code>ee7970b</code></a> travis: really move on</li>
<li><a href="https://github.com/indutny/elliptic/commit/`637d0216b58de7edee4f3eb5641295ac323acadb <https://github.com/neos/neos-development-collection/commit/637d0216b58de7edee4f3eb5641295ac323acadb>`_"><code>637d021</code></a> travis: move on</li>
<li><a href="https://github.com/indutny/elliptic/commit/`5ed0babb6467cd8575a9218265473fda926d9d42 <https://github.com/neos/neos-development-collection/commit/5ed0babb6467cd8575a9218265473fda926d9d42>`_"><code>5ed0bab</code></a> package: update deps</li>
<li>See full diff in <a href="https://github.com/indutny/elliptic/compare/v6.5.0...v6.5.3">compare view</a></li>
</ul>
</details>
<br />

`![Dependabot compatibility score <https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=elliptic&package-manager=npm_and_yarn&previous-version=6.5.0&new-version=6.5.3>`_](https://help.github.com/articles/configuring-automated-security-fixes)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language
- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language
- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language
- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language

You can disable automated security fix PRs for this repo from the `Security Alerts page <https://github.com/neos/neos-development-collection/network/alerts>`_.

</details>

* Packages: ``Neos``

`TASK: Bump jquery from 3.4.1 to 3.5.0 in /Neos.Neos <https://github.com/neos/neos-development-collection/pull/3023>`_
----------------------------------------------------------------------------------------------------------------------

Bumps `jquery <https://github.com/jquery/jquery>`_ from 3.4.1 to 3.5.0.
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href="https://github.com/jquery/jquery/releases">jquery's releases</a>.</em></p>
<blockquote>
<h2>jQuery 3.5.0 Released!</h2>
<p>See the blog post:
<a href="https://blog.jquery.com/2020/04/10/jquery-3-5-0-released/">https://blog.jquery.com/2020/04/10/jquery-3-5-0-released/</a>
and the upgrade guide:
<a href="https://jquery.com/upgrade-guide/3.5/">https://jquery.com/upgrade-guide/3.5/</a></p>
<p><strong>NOTE:</strong> Despite being a minor release, this update includes a breaking change that we had to make to fix <a href="https://github.com/advisories/GHSA-gxr4-xjj5-5px2">a security issue</a> ( <a href="https://nvd.nist.gov/vuln/detail/CVE-2020-11022"><code>CVE-2020-11022</code></a>). Please follow the blog post &amp; the upgrade guide for more details.</p>
</blockquote>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href="https://github.com/jquery/jquery/commit/`7a0a850f3d41c0412609c1d32b1e602d4afe2f4e <https://github.com/neos/neos-development-collection/commit/7a0a850f3d41c0412609c1d32b1e602d4afe2f4e>`_"><code>7a0a850</code></a> 3.5.0</li>
<li><a href="https://github.com/jquery/jquery/commit/`8570a08f6689223aa06ca8cc51d488c6d81d44f9 <https://github.com/neos/neos-development-collection/commit/8570a08f6689223aa06ca8cc51d488c6d81d44f9>`_"><code>8570a08</code></a> Release: Update AUTHORS.txt</li>
<li><a href="https://github.com/jquery/jquery/commit/`da3dd85b63c4e3a6a768132c2a83a1a6eec24840 <https://github.com/neos/neos-development-collection/commit/da3dd85b63c4e3a6a768132c2a83a1a6eec24840>`_"><code>da3dd85</code></a> Ajax: Do not execute scripts for unsuccessful HTTP responses</li>
<li><a href="https://github.com/jquery/jquery/commit/`065143c2e93512eb0c82d1b344b71d06eb7cf01c <https://github.com/neos/neos-development-collection/commit/065143c2e93512eb0c82d1b344b71d06eb7cf01c>`_"><code>065143c</code></a> Ajax: Overwrite s.contentType with content-type header value, if any</li>
<li><a href="https://github.com/jquery/jquery/commit/`1a4f10ddc37c34c6dc3a451ee451b5c6cf367399 <https://github.com/neos/neos-development-collection/commit/1a4f10ddc37c34c6dc3a451ee451b5c6cf367399>`_"><code>1a4f10d</code></a> Tests: Blacklist one focusin test in IE</li>
<li><a href="https://github.com/jquery/jquery/commit/`9e15d6b469556eccfa607c5ecf53b20c84529125 <https://github.com/neos/neos-development-collection/commit/9e15d6b469556eccfa607c5ecf53b20c84529125>`_"><code>9e15d6b</code></a> Event: Use only one focusin/out handler per matching window &amp; document</li>
<li><a href="https://github.com/jquery/jquery/commit/`966a70909019aa09632c87c0002c522fa4a1e30e <https://github.com/neos/neos-development-collection/commit/966a70909019aa09632c87c0002c522fa4a1e30e>`_"><code>966a709</code></a> Manipulation: Skip the select wrapper for &lt;option&gt; outside of IE 9</li>
<li><a href="https://github.com/jquery/jquery/commit/`1d61fd9407e6fbe82fe55cb0b938307aa0791f77 <https://github.com/neos/neos-development-collection/commit/1d61fd9407e6fbe82fe55cb0b938307aa0791f77>`_"><code>1d61fd9</code></a> Manipulation: Make jQuery.htmlPrefilter an identity function</li>
<li><a href="https://github.com/jquery/jquery/commit/`04bf577e2f961c9dde85ddadc77f71bc7bc671cc <https://github.com/neos/neos-development-collection/commit/04bf577e2f961c9dde85ddadc77f71bc7bc671cc>`_"><code>04bf577</code></a> Selector: Update Sizzle from 2.3.4 to 2.3.5</li>
<li><a href="https://github.com/jquery/jquery/commit/`7506c9ca62a2f3ef773e19385918c31e9d62d412 <https://github.com/neos/neos-development-collection/commit/7506c9ca62a2f3ef773e19385918c31e9d62d412>`_"><code>7506c9c</code></a> Build: Resolve Travis config warnings</li>
<li>Additional commits viewable in <a href="https://github.com/jquery/jquery/compare/3.4.1...3.5.0">compare view</a></li>
</ul>
</details>
<details>
<summary>Maintainer changes</summary>
<p>This version was pushed to npm by <a href="https://www.npmjs.com/~mgol">mgol</a>, a new releaser for jquery since your current version.</p>
</details>
<br />

`![Dependabot compatibility score <https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=jquery&package-manager=npm_and_yarn&previous-version=3.4.1&new-version=3.5.0>`_](https://help.github.com/articles/configuring-automated-security-fixes)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language
- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language
- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language
- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language

You can disable automated security fix PRs for this repo from the `Security Alerts page <https://github.com/neos/neos-development-collection/network/alerts>`_.

</details>

* Packages: ``Neos``

`TASK: Bump acorn from 6.2.1 to 6.4.1 in /Neos.Neos <https://github.com/neos/neos-development-collection/pull/3022>`_
---------------------------------------------------------------------------------------------------------------------

Bumps `acorn <https://github.com/acornjs/acorn>`_ from 6.2.1 to 6.4.1.
<details>
<summary>Commits</summary>
<ul>
<li><a href="https://github.com/acornjs/acorn/commit/`9a2e9b6678e243d66846b91179d650d28453e70c <https://github.com/neos/neos-development-collection/commit/9a2e9b6678e243d66846b91179d650d28453e70c>`_"><code>9a2e9b6</code></a> Mark version 6.4.1</li>
<li><a href="https://github.com/acornjs/acorn/commit/`90a9548ea0ce351b54f956e2c4ed27cca9631284 <https://github.com/neos/neos-development-collection/commit/90a9548ea0ce351b54f956e2c4ed27cca9631284>`_"><code>90a9548</code></a> More rigorously check surrogate pairs in regexp validator</li>
<li><a href="https://github.com/acornjs/acorn/commit/`df0cf1a3e2b1a51a26c14984dc0f5412b7151b10 <https://github.com/neos/neos-development-collection/commit/df0cf1a3e2b1a51a26c14984dc0f5412b7151b10>`_"><code>df0cf1a</code></a> Mark version 6.4.0</li>
<li><a href="https://github.com/acornjs/acorn/commit/`53034126864b492da4e278628bb972cb2a9313d4 <https://github.com/neos/neos-development-collection/commit/53034126864b492da4e278628bb972cb2a9313d4>`_"><code>5303412</code></a> Also export Parser via Parser.acorn</li>
<li><a href="https://github.com/acornjs/acorn/commit/`efe273e70123449a458157dbf578afaf109a49ab <https://github.com/neos/neos-development-collection/commit/efe273e70123449a458157dbf578afaf109a49ab>`_"><code>efe273e</code></a> give token types and etc to plugins</li>
<li><a href="https://github.com/acornjs/acorn/commit/`ac6decb94a3aa4eee99230fdaf5883dfaafe8479 <https://github.com/neos/neos-development-collection/commit/ac6decb94a3aa4eee99230fdaf5883dfaafe8479>`_"><code>ac6decb</code></a> Mark version 6.3.0</li>
<li><a href="https://github.com/acornjs/acorn/commit/`7e9817d17639d95cc6dbacfde734a0626b2a7dea <https://github.com/neos/neos-development-collection/commit/7e9817d17639d95cc6dbacfde734a0626b2a7dea>`_"><code>7e9817d</code></a> Allow sourceType: module even with ecmaVersion &lt; 6</li>
<li><a href="https://github.com/acornjs/acorn/commit/`e2b8cc087386eccc2ad6fd4a02b4257833557cb3 <https://github.com/neos/neos-development-collection/commit/e2b8cc087386eccc2ad6fd4a02b4257833557cb3>`_"><code>e2b8cc0</code></a> Fix broken parsing of new expressions when allowReserved==&quot;never&quot;</li>
<li><a href="https://github.com/acornjs/acorn/commit/`1555c528855b10320ce98b4154906d7898c92990 <https://github.com/neos/neos-development-collection/commit/1555c528855b10320ce98b4154906d7898c92990>`_"><code>1555c52</code></a> Update acorn.d.ts</li>
<li>See full diff in <a href="https://github.com/acornjs/acorn/compare/6.2.1...6.4.1">compare view</a></li>
</ul>
</details>
<br />

`![Dependabot compatibility score <https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=acorn&package-manager=npm_and_yarn&previous-version=6.2.1&new-version=6.4.1>`_](https://help.github.com/articles/configuring-automated-security-fixes)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language
- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language
- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language
- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language

You can disable automated security fix PRs for this repo from the `Security Alerts page <https://github.com/neos/neos-development-collection/network/alerts>`_.

</details>

* Packages: ``Neos``

`[TASK] Add .travis.yml <https://github.com/neos/neos-development-collection/pull/32>`_
---------------------------------------------------------------------------------------

Execute unit tests on Travis CI.

`[TASK] Allow to override TYPO3.Form configuration from TS <https://github.com/neos/neos-development-collection/pull/31>`_
--------------------------------------------------------------------------------------------------------------------------

This change allow to override the Form configuration from TypoScript::

```
prototype(TYPO3.Neos.NodeTypes:Form) {
    overrideConfiguration = TYPO3.TYPO3TypoScript:RawArray {
        finishers = TYPO3.TypoScript:RawArray {
            copy = TYPO3.TypoScript:RawArray {
                options = TYPO3.TypoScript:RawArray {
                    recipientAddress = ${q(node).property('email')}
                }
            }
        }
    }
}
```

`[FEATURE] Node creation Wizard and actions on node creation <https://github.com/neos/neos-development-collection/pull/27>`_
----------------------------------------------------------------------------------------------------------------------------

WIP!

See `TYPO3.Neos.NodeTypes:Gallery` and `TYPO3.Neos.NodeTypes:Test` for ideas how to test this feature.

More info here: https://discuss.neos.io/t/rfc-allow-to-define-a-dialog-which-will-be-shown-on-node-creation/91/22

`[TASK] "Custom Backend Module" documentation <https://github.com/neos/neos-development-collection/pull/19>`_
-------------------------------------------------------------------------------------------------------------

`[FEATURE] node:repair sub command for removing broken entity references <https://github.com/neos/neos-development-collection/pull/26>`_
----------------------------------------------------------------------------------------------------------------------------------------

This change introduces a new sub command for node:repair which detects
and removes node property references to entities which don't exist.

One practical example are Image nodes whose "image" property points to
ImageVariant objects which, for whatever reason, have been removed
in the meantime. For these nodes, node:repair will now set the "image"
property to NULL.

`[TASK] Make the ConvertUrisImplementation extensible <https://github.com/neos/neos-development-collection/pull/24>`_
---------------------------------------------------------------------------------------------------------------------

With this change the ConvertUrisImplementation is more extensible.
The anonymous function is now a normal method, so now the URLs are better
expandable via an aspect.

* Resolves: `NEOS-1477 <https://jira.neos.io/browse/NEOS-1477>`_

`TASK: New FlowQuery filter operation!instanceof <https://github.com/neos/neos-development-collection/pull/23>`_
----------------------------------------------------------------------------------------------------------------

Checks if the value is not an instance of the operand.

Example of usage:

  node = ${q(node).filter('[!instanceof Acme:Node]')}

NEOS-1321 #close

`[TASK] Fix missing space and capitalization <https://github.com/neos/neos-development-collection/pull/13>`_
------------------------------------------------------------------------------------------------------------

`[TASK] Adapt Neos composer.json to new installer script <https://github.com/neos/neos-development-collection/pull/18>`_
------------------------------------------------------------------------------------------------------------------------

Adapts the Neos composer.json to the new configuration for
installer resources that works with joined repositories.
The old configuration (which won't be used anymore) is
kept for backwards compatibility reasons but should be removed
soon.

`[TASK] Security warning about public Neos demo site <https://github.com/neos/neos-development-collection/pull/12>`_
--------------------------------------------------------------------------------------------------------------------

`[TASK] Create .codeclimate.yml <https://github.com/neos/neos-development-collection/pull/6>`_
----------------------------------------------------------------------------------------------

Adds a codeclimate configuration excluding Migrations, Tests and
JavaScript libraries.

`[TASK] Add trait to avoid duplicate code in ViewHelpers <https://github.com/neos/neos-development-collection/pull/3>`_
-----------------------------------------------------------------------------------------------------------------------

The new `TypoScriptContextTrait` can be used to get
variables from the TypoScript runtime context inside a
ViewHelper as long as it's used inside a
`TypoScriptAwareView`. This helps to avoid code duplication
while avoiding long inheritance chains.

`FEATURE: Support search by property & exact value in NodeDataRepository <https://github.com/neos/neos-development-collection/pull/1>`_
---------------------------------------------------------------------------------------------------------------------------------------

Currently it is only possible to search through the properties by
giving a string that matches for any key or value found in the
jsonified properties field.

With this change, the term can also be an array to match exactly on a
given key / value combination.
The search term could be given as `['key' => 'value']`.

NEOS-1460 #close

`FEATURE: Support search by property & exact value in NodeDataRepository <https://github.com/neos/neos-development-collection/pull/1>`_
---------------------------------------------------------------------------------------------------------------------------------------

Currently it is only possible to search through the properties by
giving a string that matches for any key or value found in the
jsonified properties field.

With this change, the term can also be an array to match exactly on a
given key / value combination.
The search term could be given as `['key' => 'value']`.

NEOS-1460 #close

`[TASK] "Custom Backend Module" documentation <https://github.com/neos/neos-development-collection/pull/19>`_
-------------------------------------------------------------------------------------------------------------

`Detailed log <https://github.com/neos/neos-development-collection/compare/5.3.1...7.0.0>`_
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
