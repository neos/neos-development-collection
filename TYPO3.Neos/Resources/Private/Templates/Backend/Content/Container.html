{namespace t=TYPO3\TYPO3\ViewHelpers}
<f:security.ifAccess resource="TYPO3_TYPO3_Backend_BackendController">
	<f:if condition="{0: 'live'} != {0: node.context.workspace.name}">
		<!-- TODO: remove this from HTML as it should not be shown in preview mode for example, this causes 'flickering' -->
		<div id="t3-ui-top" class="aloha-block-do-not-deactivate t3-ui">
			<div id="t3-launcher"></div>
			<ul class="t3-topbar">
				<li class="t3-active">
					<f:link.action package="TYPO3.TYPO3" controller="Backend\Backend" action="index">Content</f:link.action>
				</li>
				<f:for each="{modules}" as="module" key="path">
					<f:if condition="{module.hideInMenu}">
						<f:then></f:then>
						<f:else>
							<f:if condition="{module.role}">
								<f:then>
									<f:security.ifHasRole role="{module.role}">
										<li>
											<t:link.module path="{path}">{module.label}</t:link.module>
										</li>
									</f:security.ifHasRole>
								</f:then>
								<f:else>
									<li>
										<t:link.module path="{path}">{module.label}</t:link.module>
									</li>
								</f:else>
							</f:if>
						</f:else>
					</f:if>
				</f:for>
			</ul>
			<f:render partial="Backend/UserMenu" arguments="{_all}" />
			<div class="t3-clear"></div>
		</div>
	</f:if>
</f:security.ifAccess>